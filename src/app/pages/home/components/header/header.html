<ng-container *ngIf="headerData">
  <div class="nav-progress">
    <div class="nav-progress-bar" [style.width.%]="progressWidth"></div>
  </div>

  <header class="header-fixed header-bg transition-all duration-300">
    <div class="container mx-auto px-4 sm:px-6 h-full flex items-center">
      <div class="flex items-center justify-between w-full">
        <!-- Logo and Brand -->
        <div class="flex items-center space-x-2 sm:space-x-3">
          <button
            (click)="navigateToSection($event, 'home')"
            class="w-9 h-9 sm:w-12 sm:h-12 bg-gradient-to-r from-accent-blue to-light-blue dark:from-dark-accent-blue dark:to-dark-light-blue rounded-full flex items-center justify-center hover:scale-110 transition-all duration-200 group"
            title="Go to Home"
          >
            <svg
              class="w-6 h-6 text-white group-hover:scale-110 transition-transform duration-200"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"
              ></path>
            </svg>
          </button>
          <span class="text-lg sm:text-2xl font-bold text-gradient">Home</span>
        </div>
        <!-- Desktop Navigation -->
        <nav class="hidden md:block pointer-events-none">
          <ul class="flex space-x-1 sm:space-x-2 pointer-events-auto">
            <li>
              <a
                href="#home"
                class="nav-item"
                [class.active]="activeSection === 'home'"
                (click)="navigateToSection($event, 'home')"
              >
                Home
              </a>
            </li>
            <li>
              <a
                href="#about"
                class="nav-item"
                [class.active]="activeSection === 'about'"
                (click)="navigateToSection($event, 'about')"
              >
                About
              </a>
            </li>
            <li>
              <a
                href="#portfolio"
                class="nav-item"
                [class.active]="activeSection === 'portfolio'"
                (click)="navigateToSection($event, 'portfolio')"
              >
                Projects
              </a>
            </li>
            <li>
              <a
                href="#experience"
                class="nav-item"
                [class.active]="activeSection === 'experience'"
                (click)="navigateToSection($event, 'experience')"
              >
                Experience
              </a>
            </li>
            <li>
              <a
                href="#blog"
                class="nav-item"
                [class.active]="activeSection === 'blog'"
                (click)="navigateToSection($event, 'blog')"
              >
                Blog
              </a>
            </li>
            <li>
              <a
                href="#contact"
                class="nav-item"
                [class.active]="activeSection === 'contact'"
                (click)="navigateToSection($event, 'contact')"
              >
                Contact
              </a>
            </li>
          </ul>
        </nav>

        <!-- Desktop Profile and Actions -->
        <div class="z-50 hidden md:flex items-center space-x-4 sm:space-x-6">
          <div
            class="theme-toggle cursor-pointer p-2 rounded-full hover:bg-accent-blue/10"
            (click)="toggleTheme()"
          >
            <svg
              class="w-5 h-5 text-text-primary dark:text-dark-text-primary"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <circle cx="12" cy="12" r="5"></circle>
              <line x1="12" y1="1" x2="12" y2="3"></line>
              <line x1="12" y1="21" x2="12" y2="23"></line>
              <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
              <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
              <line x1="1" y1="12" x2="3" y2="12"></line>
              <line x1="21" y1="12" x2="23" y2="12"></line>
              <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
              <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
            </svg>
            <svg
              class="theme-toggle-icon theme-toggle-moon"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
            </svg>
          </div>
          <div class="flex items-center space-x-3">
            <img
              [src]="headerData.personalData.image"
              [alt]="headerData.personalData.name"
              class="w-10 h-10 rounded-full border-2 border-accent-blue/30 dark:border-dark-accent-blue/30 object-cover"
            />
            <div class="text-sm">
              <p
                class="font-semibold text-text-primary dark:text-dark-text-primary"
              >
                {{ headerData.personalData.name }}
              </p>
              <p class="text-accent-blue dark:text-dark-accent-blue text-xs">
                {{ headerData.personalData.title }}
              </p>
            </div>
          </div>
          <div class="flex space-x-3">
            <a
              [href]="headerData.contactData.github"
              target="_blank"
              class="w-8 h-8 bg-accent-blue/20 dark:bg-dark-accent-blue/20 rounded-full flex items-center justify-center hover:bg-accent-blue dark:hover:bg-dark-accent-blue hover:scale-110 transition-all duration-200"
            >
              <span
                class="text-xs text-accent-blue dark:text-dark-accent-blue hover:text-white"
              >
                <lucide-icon [img]="githubIcon"></lucide-icon>
              </span>
            </a>
            <a
              [href]="headerData.contactData.linkedin"
              target="_blank"
              class="w-8 h-8 bg-accent-blue/20 dark:bg-dark-accent-blue/20 rounded-full flex items-center justify-center hover:bg-accent-blue dark:hover:bg-dark-accent-blue hover:scale-110 transition-all duration-200"
            >
              <span
                class="text-xs text-accent-blue dark:text-dark-accent-blue hover:text-white"
              >
                <lucide-icon [img]="linkedinIcon"></lucide-icon>
              </span>
            </a>
          </div>
        </div>

        <!-- Mobile Actions -->
        <div class="flex items-center space-x-2 sm:space-x-3 md:hidden z-50">
          <div
            class="theme-toggle cursor-pointer p-2 rounded-full hover:bg-accent-blue/10"
            (click)="toggleTheme()"
          >
            <svg
              class="w-5 h-5 text-text-primary dark:text-dark-text-primary"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <circle cx="12" cy="12" r="5"></circle>
              <line x1="12" y1="1" x2="12" y2="3"></line>
              <line x1="12" y1="21" x2="12" y2="23"></line>
              <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
              <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
              <line x1="1" y1="12" x2="3" y2="12"></line>
              <line x1="21" y1="12" x2="23" y2="12"></line>
              <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
              <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
            </svg>
            <svg
              class="theme-toggle-icon theme-toggle-moon"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
            </svg>
          </div>
          <button
            class="p-2 rounded-lg hover:bg-accent-blue/10 dark:hover:bg-dark-accent-blue/10 text-text-primary dark:text-dark-text-primary transition-all duration-200"
            (click)="toggleMobileMenu()"
            aria-label="Toggle mobile menu"
          >
            <svg
              class="w-6 h-6 transition-transform duration-300"
              [class.rotate-90]="mobileMenuOpen"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                [attr.d]="
                  mobileMenuOpen
                    ? 'M6 18L18 6M6 6l12 12'
                    : 'M4 6h16M4 12h16M4 18h16'
                "
              ></path>
            </svg>
          </button>
        </div>
      </div>
    </div>

    <!-- Mobile Menu -->
    <div
      class="fixed inset-x-0 top-[64px] sm:top-[80px] bg-white dark:bg-gray-900 border-b border-border-color transform transition-all duration-300 ease-in-out shadow-lg"
      [class.translate-y-0]="mobileMenuOpen"
      [class.-translate-y-full]="!mobileMenuOpen"
      [class.opacity-100]="mobileMenuOpen"
      [class.opacity-0]="!mobileMenuOpen"
      [class.invisible]="!mobileMenuOpen"
    >
      <nav
        class="container mx-auto divide-y divide-gray-100 dark:divide-gray-800"
      >
        <!-- Mobile Profile Section -->
        <div class="p-4 flex items-center space-x-4" *ngIf="headerData">
          <img
            [src]="headerData.personalData.image"
            [alt]="headerData.personalData.name"
            class="w-12 h-12 rounded-full border-2 border-accent-blue/30 dark:border-dark-accent-blue/30 object-cover"
          />
          <div>
            <h3
              class="font-semibold text-text-primary dark:text-dark-text-primary"
            >
              {{ headerData.personalData.name }}
            </h3>
            <p class="text-sm text-accent-blue dark:text-dark-accent-blue">
              {{ headerData.personalData.title }}
            </p>
          </div>
        </div>

        <!-- Navigation Links -->
        <ul class="py-2">
          <li>
            <a
              href="#home"
              class="flex items-center px-6 py-4 text-text-primary dark:text-dark-text-primary hover:bg-accent-blue/5 dark:hover:bg-dark-accent-blue/5 transition-colors duration-200 group"
              [class.active]="activeSection === 'home'"
              (click)="navigateToSection($event, 'home')"
            >
              <span class="flex items-center">
                <svg
                  class="w-5 h-5 mr-3 text-gray-400 group-hover:text-accent-blue dark:group-hover:text-dark-accent-blue transition-colors duration-200"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"
                  />
                </svg>
                <span class="font-medium">Home</span>
              </span>
              <span
                class="ml-auto opacity-0 group-hover:opacity-100 transform translate-x-2 group-hover:translate-x-0 transition-all duration-200"
              >
                <svg
                  class="w-5 h-5 text-accent-blue dark:text-dark-accent-blue"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M9 5l7 7-7 7"
                  />
                </svg>
              </span>
            </a>
          </li>
          <li>
            <a
              href="#about"
              class="flex items-center px-6 py-4 text-text-primary dark:text-dark-text-primary hover:bg-accent-blue/5 dark:hover:bg-dark-accent-blue/5 transition-colors duration-200 group"
              [class.active]="activeSection === 'about'"
              (click)="navigateToSection($event, 'about')"
            >
              <span class="flex items-center">
                <svg
                  class="w-5 h-5 mr-3 text-gray-400 group-hover:text-accent-blue dark:group-hover:text-dark-accent-blue transition-colors duration-200"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"
                  />
                </svg>
                <span class="font-medium">About</span>
              </span>
              <span
                class="ml-auto opacity-0 group-hover:opacity-100 transform translate-x-2 group-hover:translate-x-0 transition-all duration-200"
              >
                <svg
                  class="w-5 h-5 text-accent-blue dark:text-dark-accent-blue"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M9 5l7 7-7 7"
                  />
                </svg>
              </span>
            </a>
          </li>
          <li>
            <a
              href="#portfolio"
              class="flex items-center px-6 py-4 text-text-primary dark:text-dark-text-primary hover:bg-accent-blue/5 dark:hover:bg-dark-accent-blue/5 transition-colors duration-200 group"
              [class.active]="activeSection === 'portfolio'"
              (click)="navigateToSection($event, 'portfolio')"
            >
              <span class="flex items-center">
                <svg
                  class="w-5 h-5 mr-3 text-gray-400 group-hover:text-accent-blue dark:group-hover:text-dark-accent-blue transition-colors duration-200"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"
                  />
                </svg>
                <span class="font-medium">Projects</span>
              </span>
              <span
                class="ml-auto opacity-0 group-hover:opacity-100 transform translate-x-2 group-hover:translate-x-0 transition-all duration-200"
              >
                <svg
                  class="w-5 h-5 text-accent-blue dark:text-dark-accent-blue"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M9 5l7 7-7 7"
                  />
                </svg>
              </span>
            </a>
          </li>
          <li>
            <a
              href="#experience"
              class="flex items-center px-6 py-4 text-text-primary dark:text-dark-text-primary hover:bg-accent-blue/5 dark:hover:bg-dark-accent-blue/5 transition-colors duration-200 group"
              [class.active]="activeSection === 'experience'"
              (click)="navigateToSection($event, 'experience')"
            >
              <span class="flex items-center">
                <svg
                  class="w-5 h-5 mr-3 text-gray-400 group-hover:text-accent-blue dark:group-hover:text-dark-accent-blue transition-colors duration-200"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2 2v2m4 6h.01M5 20h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"
                  />
                </svg>
                <span class="font-medium">Experience</span>
              </span>
              <span
                class="ml-auto opacity-0 group-hover:opacity-100 transform translate-x-2 group-hover:translate-x-0 transition-all duration-200"
              >
                <svg
                  class="w-5 h-5 text-accent-blue dark:text-dark-accent-blue"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M9 5l7 7-7 7"
                  />
                </svg>
              </span>
            </a>
          </li>
          <li>
            <a
              href="#blog"
              class="flex items-center px-6 py-4 text-text-primary dark:text-dark-text-primary hover:bg-accent-blue/5 dark:hover:bg-dark-accent-blue/5 transition-colors duration-200 group"
              [class.active]="activeSection === 'blog'"
              (click)="navigateToSection($event, 'blog')"
            >
              <span class="flex items-center">
                <svg
                  class="w-5 h-5 mr-3 text-gray-400 group-hover:text-accent-blue dark:group-hover:text-dark-accent-blue transition-colors duration-200"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h10a2 2 0 012 2v1m2 13a2 2 0 01-2-2V7m2 13a2 2 0 002-2V9.5a2.5 2.5 0 00-2.5-2.5H15"
                  />
                </svg>
                <span class="font-medium">Blog</span>
              </span>
              <span
                class="ml-auto opacity-0 group-hover:opacity-100 transform translate-x-2 group-hover:translate-x-0 transition-all duration-200"
              >
                <svg
                  class="w-5 h-5 text-accent-blue dark:text-dark-accent-blue"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M9 5l7 7-7 7"
                  />
                </svg>
              </span>
            </a>
          </li>
          <li>
            <a
              href="#contact"
              class="flex items-center px-6 py-4 text-text-primary dark:text-dark-text-primary hover:bg-accent-blue/5 dark:hover:bg-dark-accent-blue/5 transition-colors duration-200 group"
              [class.active]="activeSection === 'contact'"
              (click)="navigateToSection($event, 'contact')"
            >
              <span class="flex items-center">
                <svg
                  class="w-5 h-5 mr-3 text-gray-400 group-hover:text-accent-blue dark:group-hover:text-dark-accent-blue transition-colors duration-200"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"
                  />
                </svg>
                <span class="font-medium">Contact</span>
              </span>
              <span
                class="ml-auto opacity-0 group-hover:opacity-100 transform translate-x-2 group-hover:translate-x-0 transition-all duration-200"
              >
                <svg
                  class="w-5 h-5 text-accent-blue dark:text-dark-accent-blue"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M9 5l7 7-7 7"
                  />
                </svg>
              </span>
            </a>
          </li>
        </ul>

        <div
          class="p-6 border-t border-gray-100 dark:border-gray-800 bg-gray-50/50 dark:bg-gray-900/50"
        >
          <div class="flex flex-col space-y-4">
            <h4 class="text-sm font-medium text-gray-500 dark:text-gray-400">
              Connect with me
            </h4>
            <div class="flex space-x-4">
              <a
                [href]="headerData.contactData.github"
                target="_blank"
                class="flex items-center px-4 py-2 space-x-3 text-sm text-text-primary dark:text-dark-text-primary bg-white dark:bg-dark-surface rounded-lg border border-gray-200 dark:border-gray-700 hover:border-accent-blue dark:hover:border-dark-accent-blue hover:bg-accent-blue/5 dark:hover:bg-dark-accent-blue/5 transition-all duration-200 group"
              >
                <lucide-icon
                  [img]="githubIcon"
                  class="w-5 h-5 text-gray-400 group-hover:text-accent-blue dark:group-hover:text-dark-accent-blue"
                ></lucide-icon>
                <span>GitHub</span>
              </a>
              <a
                [href]="headerData.contactData.linkedin"
                target="_blank"
                class="flex items-center px-4 py-2 space-x-3 text-sm text-text-primary dark:text-dark-text-primary bg-white dark:bg-dark-surface rounded-lg border border-gray-200 dark:border-gray-700 hover:border-accent-blue dark:hover:border-dark-accent-blue hover:bg-accent-blue/5 dark:hover:bg-dark-accent-blue/5 transition-all duration-200 group"
              >
                <lucide-icon
                  [img]="linkedinIcon"
                  class="w-5 h-5 text-gray-400 group-hover:text-accent-blue dark:group-hover:text-dark-accent-blue"
                ></lucide-icon>
                <span>LinkedIn</span>
              </a>
            </div>
          </div>
        </div>
      </nav>
    </div>
  </header>
</ng-container>
